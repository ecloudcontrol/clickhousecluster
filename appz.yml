    app:
        name: ClickHouseCluster
        code: clickhousecluster
        notify: apaul@ecloudcontrol.com

    build:
        version: 25.6
        env: PROD
        build_file: none
        output_files: output/*.zip
        image_template: clickhousecluster-25.6

    deploy:
        context: alpha/PROD
        type: statefulset
        replicas: 3
        resources: x-large
        port:
        - 8123
        - 9000

    volumes:
      - claim: clickhouse-data
        class: linode-block-storage
        mount: /appz/data
        name: data
        size: 200Gi
        matchLabels: false


    properties:
        CLICKHOUSE_CLUSTER_NAME: clickhousecluster
        CLICKHOUSE_USER: default
        CLICKHOUSE_PASSWORD:
          vault: CLICKHOUSE_PASSWORD
        CLICKHOUSE_NODES: 0@clickhousecluster-25-6-0.clickhousecluster-25-6.alpha-prod.svc.cluster.local:9000,1@clickhousecluster-25-6-1.clickhousecluster-25-6.alpha-prod.svc.cluster.local:9000,2@clickhousecluster-25-6-2.clickhousecluster-25-6.alpha-prod.svc.cluster.local:9000
        KEEPER_NODES: clickhousecluster-25-6-0.clickhousecluster-25-6.alpha-prod.svc.cluster.local:9181,clickhousecluster-25-6-1.clickhousecluster-25-6.alpha-prod.svc.cluster.local:9181,clickhousecluster-25-6-2.clickhousecluster-25-6.alpha-prod.svc.cluster.local:9181
        REPLICATION_FACTOR: 3
        FLINK_LOG_DIR: /appz/log
        SHARD_COUNT: 1
        ENABLE_FLUENTD: 1
        revision : 4
